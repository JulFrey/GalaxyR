% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/2025-10-27_JF_R_Galaxy_functions.R
\name{galaxy_wait_for_job}
\alias{galaxy_wait_for_job}
\title{Wait for a Galaxy job to complete}
\usage{
galaxy_wait_for_job(
  job_id,
  galaxy_url = "https://usegalaxy.eu",
  poll_interval = 3,
  timeout = 600
)
}
\arguments{
\item{job_id}{Character scalar. Encoded Galaxy job ID.}

\item{galaxy_url}{Character. Base URL of the Galaxy instance
(for example \code{"https://usegalaxy.eu"}).
If the environment variable \code{GALAXY_URL} is set, it takes precedence.}

\item{poll_interval}{Numeric. Seconds to wait between status checks.
Defaults to 3.}

\item{timeout}{Numeric. Maximum time to wait in seconds.
Defaults to 600 (10 minutes).}
}
\value{
A named list containing the final Galaxy job object.
}
\description{
Polls the Galaxy API until a job reaches a terminal state
(\code{ok}, \code{error}, or \code{deleted}).
}
\details{
Galaxy jobs are executed asynchronously. This function polls
\verb{/api/jobs/\{job_id\}} until the job state becomes \code{"ok"}.

If the job enters state \code{"error"} or \code{"deleted"}, an error is raised.
If the timeout is exceeded, the function stops with an error.
}
\examples{
\dontshow{if (galaxy_has_key()) withAutoprint(\{ # examplesIf}
history_id <- galaxy_initialize("add line")
tool <- galaxy_get_tool_id("Add line to file")
test_file <- tempfile(fileext = ".txt")
test_text <- "This is an example \ntest file."
writeLines(test_text,test_file)

file_id <- galaxy_upload_https(test_file, history_id)

inputs <- galaxy_get_tool(tool)

job_id <- galaxy_run_tool(tool_id = tool, history_id = history_id, inputs = list(
  text_input = "added text",
  infile = list(
    src = "hda",
    id  = file_id
  ),
  options = "header"
))

result <- galaxy_wait_for_job(job_id)
\dontshow{\}) # examplesIf}
}
\seealso{
\itemize{
\item \code{\link{galaxy_run_tool}} for submitting tools
}
}
